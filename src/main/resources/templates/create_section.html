<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
    <head>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
        <title></title>

        <script>
            function addRole() {
                const button_container = document.getElementById("add_button_container");

                let row = document.createElement('tr');

                let data1 = document.createElement('td');
                let inp1 = document.createElement('input');
                inp1.classList.add("form-control");
                inp1.classList.add("form-control-plaintext");
                inp1.name = 'roles';
                data1.append(inp1);

                let data2 = document.createElement('td');
                let inp2 = document.createElement('input');
                inp2.classList.add("form-control");
                inp2.classList.add("form-control-plaintext");
                inp2.name = 'perms';
                data2.append(inp2);

                row.append(data1);
                row.append(data2);

                button_container.before(row);
            }
        </script>

    </head>

    <body>
        <div th:insert="~{general :: header(true)}"></div>

        <form class="vstack gap-5 container" action="/create_section" method="post" th:object="${form_wrapper}">
            <input type="hidden" name="sessionId" th:value="${session_id}">
            <h1 class="text-center text-uppercase opacity-75 mt-5">Создание раздела</h1>

            <div class="input-group">
                <label for="section_name" class="input-group-text">Название:</label>
                <input type="text" id="section_name" class="form-control" placeholder="название раздела..." th:field="*{name}">
            </div>

            <div class="input-group">
                <label for="section_description" class="input-group-text">Описание:</label>
                <textarea rows="5" class="form-control" th:field="*{description}"></textarea>
            </div>

            <label for="roles_table" class="form-label text-center"><h4>Правила доступа</h4></label>
            <table class="table table-light" id="roles_table">
                <thead>
                    <tr>
                        <th scope="col" class="text-center w-50">Роль</th>
                        <th scope="col" class="text-center">Уровень прав</th>
                    </tr>
                </thead>

                <tbody>
                    <tr id="add_button_container">
                        <td colspan="2" class="p-0">
                            <button type="button" class="btn btn-light rounded-0 border-0 w-100" onclick="addRole()">
                                + добавить
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
            
            <button type="submit" class="btn btn-outline-primary">
                СОЗДАТЬ
            </button>
        </form>
    </body>
</html>
